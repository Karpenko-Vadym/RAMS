@model RAMS.ViewModels.InterviewScheduleViewModel

<!-- PERSONAL SCHEDULE PARTIAL -->
@if (!String.IsNullOrEmpty(Model.DisplayDate))
{
    DateTime convertedDate;

    DateTime.TryParseExact(Model.DisplayDate, "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out convertedDate);

    <div class="well well-lg bottom-margin-0">
        <div class="btn-group btn-group-justified" role="group">

            <div class="btn-group" role="group">
                <input type="button" class="btn btn-info" onclick="LoadAction('personal-schedule-modal-body-div', '@Url.Action("PersonalSchedule", "Profile", new { displayDate = convertedDate.AddDays(-7).ToString("dd/MM/yyyy"), Area = "Agency" })');" value="Previous Week" />
            </div>

            <div class="btn-group" role="group">
                @if (convertedDate.ToString("dd/MM/yyyy") == DateTime.UtcNow.ToString("dd/MM/yyyy"))
                {
                    <input type="button" class="btn btn-danger" disabled value="Current Week" />
                }
                else
                {
                    <input type="button" class="btn btn-danger" onclick="LoadAction('personal-schedule-modal-body-div', '@Url.Action("PersonalSchedule", "Profile", new { displayDate = DateTime.UtcNow.ToString("dd/MM/yyyy"), Area = "Agency" })');" value="Current Week" />
                }
            </div>

            <div class="btn-group" role="group">
                <input type="button" class="btn btn-info" onclick="LoadAction('personal-schedule-modal-body-div', '@Url.Action("PersonalSchedule", "Profile", new { displayDate = convertedDate.AddDays(7).ToString("dd/MM/yyyy"), Area = "Agency" })');" value="Next Week" />
            </div>
        </div>
        <div class="vertical-padding-24"></div>

        <div class="well well-lg bottom-margin-0 background-white">
            <div class="row">
                @for (int increment = (((((int)convertedDate.DayOfWeek == 0) ? 7 : (int)convertedDate.DayOfWeek) - 1) * -1); increment <= (7 - (((int)convertedDate.DayOfWeek == 0) ? 7 : (int)convertedDate.DayOfWeek)); increment++)
                {
                    <div class="col-md-4">
                        <h4 class='text-center @((convertedDate.AddDays(increment).ToString("dd/MM/yyyy") == DateTime.UtcNow.ToString("dd/MM/yyyy")) ? "text-warning" : "")'>@convertedDate.AddDays(increment).DayOfWeek @convertedDate.AddDays(increment).ToString("dd/MM/yyyy")</h4>
                        <table id="schedule-table" class="table table-hover bottom-margin-0" cellspacing="0">
                            <thead>
                                <tr class="active">
                                    <th>Time</th>
                                    <th>Availability</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="cursor-pointer">
                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(9)) != null)
                                    {
                                        <td class="danger">9:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(9)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">9:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                                <tr class="cursor-pointer">
                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(10)) != null)
                                    {
                                        <td class="danger">10:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(10)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">10:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                                <tr class="cursor-pointer">
                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(11)) != null)
                                    {
                                        <td class="danger">11:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(11)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">11:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                                <tr class="cursor-pointer">
                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(12)) != null)
                                    {
                                        <td class="danger">12:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(12)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">12:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                                <tr class="cursor-pointer">

                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(13)) != null)
                                    {
                                        <td class="danger">13:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(13)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">13:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                                <tr class="cursor-pointer">
                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(14)) != null)
                                    {
                                        <td class="danger">14:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(14)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">14:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                                <tr class="cursor-pointer">
                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(15)) != null)
                                    {
                                        <td class="danger">15:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(15)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">15:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                                <tr class="cursor-pointer">
                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(16)) != null)
                                    {
                                        <td class="danger">16:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(16)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">16:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                                <tr class="cursor-pointer">
                                    @if (Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(17)) != null)
                                    {
                                        <td class="danger">17:00</td>
                                        <td class="danger">@Model.Interviews.FirstOrDefault(i => i.InterviewDate == convertedDate.AddDays(increment).AddHours(17)).Candidate.FullName</td>
                                    }
                                    else
                                    {
                                        <td class="success">17:00</td>
                                        <td class="success">Available</td>
                                    }
                                </tr>
                            </tbody>
                        </table>
                    </div>
                }
            </div>
        </div>
    </div>
}
else
{
    <div class="well well-lg bottom-margin-0">
        <div class="well well-lg bottom-margin-0 background-white">
            <div class="alert alert-danger bottom-margin-0" role="alert">
                <span>Schedule is not available</span>
            </div>
        </div>
    </div>
}
<!-- END OF PERSONAL SCHEDULE PARTIAL -->
